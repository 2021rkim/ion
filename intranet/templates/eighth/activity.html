{% extends "page_with_nav.html" %}
{% load phone_numbers %}
{% load staticfiles %}

{% block title %}{{ block.super }} - Activity: {{ activity }}{% endblock %}


{% block css %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{% static 'css/eighth.common.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'css/eighth.admin.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'css/profile.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'css/eighth.profile.css' %}" />
    <style type="text/css">
    dl dt, dl dd {
        font-size: 15px;
    }

    dl dt {
        float: left;
        padding-right: 5px;
    }
    </style>
{% endblock %}

{% block js %}
    {{ block.super }}
{% endblock %}

{% block main %}
<div class="primary-content">

    {% if request.user.is_eighth_admin %}
        <div class="eighth-header" style="width: 200px">
            {% include "eighth/admin/start_date.html" %}
        </div>
    {% endif %}


    <a href="{% url 'eighth_signup' %}" class="button">
        <i class="fa fa-arrow-left"></i> Sign Up
    </a>

    <h2>Activity: {{ activity }}</h2>
    <dl>
        {% if activity.description %}
        <dt>Description:</dt>
        <dd style="width: 400px">{{ scheduled_activity.activity.description }}</dd>
        {% endif %}
        <dd>{{ activity.description }}</dd>
        <dt>Default Sponsors:</dt>
        <dd>{% for sponsor in activity.sponsors.all %}
                {{ sponsor.name }}{% if not forloop.last %}, {% endif %}
            {% empty %}
                None
            {% endfor %}</dd>

        <dt>Default Rooms:</dt>
        <dd>{% for sponsor in activity.rooms.all %}
                {{ room }}{% if not forloop.last %}, {% endif %}
            {% empty %}
                None
            {% endfor %}</dd>
        
    </dl>

    <section class="user-info-eighth sponsor">
        <h3>Scheduled on:</h3>
        <table class="fancy-table">
        <thead>
        <tr>
            <th>Block</th>
            <th>Name</th>
            <th>Sponsors</th>
            <th>Rooms</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        {% for sch in scheduled_activities %}
            <tr>
                <th>
                    <a href="{% url 'eighth_signup' sch.block.id %}">
                        {{ sch.block }}
                    </a>
                </th>
                <td>
                    {{ sch.full_title }}
                </td>
                <td>
                    {% for sponsor in sch.get_true_sponsors %}
                        {{ sponsor.name }}{% if not forloop.last %}, {% endif %}
                    {% empty %}
                        None
                    {% endfor %}
                </td>

                <td>
                    {% for room in sch.get_true_rooms %}
                        {{ room }}{% if not forloop.last %}, {% endif %}
                    {% empty %}
                        None
                    {% endfor %}
                </td>
                <td>
                    <a class="button" href="{% url 'eighth_signup' sch.block.id %}?activity={{ sch.activity.id }}">
                        Sign Up
                    </a>
                </td>
            </tr>
        {% empty %}
            <tr>
            <td>
                This activity is not scheduled over the next two months.
            </td>
            </tr>
        {% endfor %}
        </tbody>
        </table>
        <br />
        Please note that activity schedulings are not fixed, and may change.
    </section>

    
</div>
{% endblock %}

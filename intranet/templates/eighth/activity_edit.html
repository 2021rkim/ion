{% extends "eighth/page_eighth_admin.html" %}
{% load staticfiles %}

{% block css %}
    {{ block.super }}
    <style type="text/css">
    select[name=sponsors], select[name=rooms],
    .inner-content input, .inner-content textarea, .inner-content select {
        min-width: 300px;
    }

    .inner-content table td {
        padding: 5px 10px;
    }
    .all-rooms, .all-sponsors {
        position: absolute;
        margin-top: -200px;
        margin-left: 200px;
        display: none
    }

    .all-rooms {
        margin-top: -150px;
    }
    </style>
{% endblock %}

{% block eighth-main %}
    <h3 style="font-size: 24px">Modify {{ actobj.name }}</h3>
    <form action="/eighth/activities/edit/{{ actobj.id }}" method="post">
    <input type="hidden" name="confirm" value="1" />
    {% csrf_token %}
    <table>
    <tr>
        <td><label for="name">Name</label></td>
        <td>
            <input type="text" name="name" value="{{ actobj.name }}" />
        </td>
    </tr>
    <tr>
        <td><label for="description">Description</label></td>
        <td><textarea name="description">{{ actobj.description }}</textarea></td>
    </tr>
    <tr>
        <td valign="top"><label for="sponsors">Sponsors</label><br />
        <a href="#" onclick="$('select[name=sponsors]>option').each(function(){$(this).removeAttr('selected')})">Deselect All</a></td>
        <td>
            <select name="sponsors" multiple size=5>
            {% for sponsor in actobj.sponsors.all %}
                <option value="{{ sponsor.id }}" selected>{{ sponsor }}</option>
            {% endfor %}
            </select><br />
            <button onclick="$('.all-sponsors').toggle();return false">Add Sponsor</button><br />
            <select class="all-sponsors" size=10 style="">
            {% for sponsor in sponsors %}
            {% if sponsor not in actobj.sponsors.all %}
                <option value="{{ sponsor.id }}" onclick="$(this).prependTo($('select[name=sponsors]'))">{{ sponsor }}</option>
            {% endif %}
            {% endfor %}
            </select>

        </td>
    </tr>
    <tr>
        <td valign="top"><label for="rooms">Rooms</label><br />
        <a href="#" onclick="$('select[name=rooms]>option').each(function(){$(this).removeAttr('selected')})">Deselect All</a></td>
        <td>
            <select name="rooms" multiple size=5 style="min-width: 150px">
            {% for room in actobj.rooms.all %}
                <option value="{{ room.id }}" selected>{{ room }}</option>
            {% endfor %}
            </select><br />

            <button onclick="$('.all-rooms').toggle();return false">Add Room</button><br />
            <select class="all-rooms" size=10 style="min-width: 150px;display: none">
            {% for room in rooms %}
                <option value="{{ room.id }}" onclick="if($(this).parent() == $('.all-rooms')) $(this).prependTo($('select[name=sponsors]')).attr('selected',true)">{{ room }}</option>
            {% endfor %}
            </select>
        </td>
    </tr>
    <tr>
        <td><label for="restricted">Restricted</label></td>
        <td><input type="checkbox" name="restricted" value="1" {% if actobj.restricted == True %}checked{% endif %} /></td>
    </tr>
    <tr>
        <td><label for="presign">Presign</label></td>
        <td><input type="checkbox" name="presign" value="1"{% if actobj.presign %} checked{% endif %}/></td>
    </tr>
    <tr>
        <td><label for="one_a_day">One a day</label></td>
        <td><input type="checkbox" name="one_a_day" value="1"{% if actobj.one_a_day %} checked{% endif %}/></td>
    </tr>
    <tr>
        <td><label for="both_blocks">Both Blocks</label></td>
        <td><input type="checkbox" name="both_blocks" value="1"{% if actobj.both_blocks %} checked{% endif %}/></td>
    </tr>
    <tr>
        <td><label for="sticky">Sticky</label></td>
        <td><input type="checkbox" name="sticky" value="1"{% if actobj.sticky %} checked{% endif %}/></td>
    </tr>
    <tr>
        <td><label for="special">Special</label></td>
        <td><input type="checkbox" name="special" value="1"{% if actobj.special %} checked{% endif %}/></td>
    </tr>
    <tr>
        <td colspan=2><input type="submit" value="Edit Activity" /></td>
    </tr>
    </table>
    </form>
{% endblock %}
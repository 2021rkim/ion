{% extends "page_base.html" %}
{% load staticfiles %}

{% block title %}
    {{ block.super }} - Login
{% endblock %}

{% block css %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{% static 'css/login.css' %}">
{% endblock %}

{% block js %}
    {{ block.super }}
    <script type='text/javascript'>
        $(document).ready(function() {
            $('input[name=username]').focus();
            $('input').each(function() {
                var empty_text = 'This field is required.';
                if($(this).attr('value') == empty_text) {
                    $(this).addClass('empty');
                    $(this).attr('value', '');
                    $(this).attr('placeholder', empty_text);
                }
            })

            $(".toggle-schedule").click(function() {
                var time = 300;
                var schedule = $(".schedule");
                var height = schedule.height();
                var bottom = schedule.css("bottom")
                if (bottom == (-1 * height) + "px") {
                    schedule.stop().animate({ bottom: "0"}, time);
                } else {
                    schedule.stop().animate({ bottom: (-1 * height) + "px"}, time);
                }

                var schedule_top_position = 10;
                if (bottom != "0px") {
                    schedule_top_position += height
                }

                var link = $(this);
                link.stop().animate({ bottom: schedule_top_position + "px"}, time);
                if (link.text().trim() == "Show Schedule") {
                    setTimeout(function() {
                        link.text("Hide Schedule");
                    }, time / 2);
                } else {
                    setTimeout(function() {
                        link.text("Show Schedule");
                    }, time / 2);
                }

            });
        });
    </script>
{% endblock %}

{% block body %}
    <div class='login'>
        <h1>TJ Intranet</h1>
        {% if auth_form.errors %}
            <p class='login-error'>Invalid username or password</p>
        {% endif %}

        <form autocomplete="off" action='/login{% if request.GET.next %}?next={{ request.GET.next }}{% endif %}' method='post'>
            {% csrf_token %}
            {% for field in auth_form %}
                {{ field }}<br>
            {% endfor %}
            <input type='submit' value='Login' />
        </form>
    </div>
    <div class="schedule">
        Schedule here
    </div>
    <a href="javascrip:void(0)" class="toggle-schedule">Show Schedule</a>
    <a class="norton-seal" target="_blank" title="Norton Secured Seal - Click to Verify" oncontextmenu="return false;" href="https://trustsealinfo.verisign.com/splash?form_file=fdf/splash.fdf&amp;dn=ion.tjhsst.edu&amp;lang=en"><img src="{% static 'img/verisign-seal.png' %}" oncontextmenu="return false;" alt="orton Secured Seal - Click to Verify"></a>
{% endblock %}